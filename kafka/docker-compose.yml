version: "3.5"

services:
  zookeeper:
    hostname: zookeeper
    container_name: cont-zookeeper
    build:
      context: docker/zookeeper
    volumes:
    - ./docker/zookeeper/zoo.cfg:/conf/zoo.cfg

    ports:
      - 2181:2181

    networks:
      - zookeeper-net
      - mariadb-univ_net

  kafka:
    depends_on:
      - zookeeper
    hostname: kafka
    container_name: cont-kafka

    environment:
      ZOOKEEPER_IP: cont-zookeeper
      # NADA
      #ADVERTISED_HOST: cont-kafka
      #ADVERTISED_PORT: 9092

    build:
      context: docker/kafka

    # opcional, se ver√≠an todos los brokers y particiones (carpetas)
    #volumes:
    # - ./docker/kafka/config:/kafka/config (peta)
    #- ./docker/kafka/data:/data
    #- ./docker/kafka/logs:/logs

    ports:
      - 29092:29092 #broker (contenedores)
      - 9092:9092 #broker (publico)
      # - 7203:7203 #publishing

    networks:
      - zookeeper-net
      - mariadb-univ_net

networks:
  zookeeper-net:
  mariadb-univ_net:
    external: true
