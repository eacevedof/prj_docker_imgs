version: "3.5"

services:
  zookeeper:
    image: wurstmeister/zookeeper
    #hostname: zookeeper
    #container_name: cont-zookeeper (no le gusta)

    ports:
      - 2181:2181

    networks:
      - zookeeper-net
      - mariadb-univ_net

  kafka:
    image: wurstmeister/kafka:latest
    depends_on:
      - zookeeper
    #hostname: kafka
    #container_name: cont-kafka

    environment:
      DOCKER_API_VERSION: 1.22
      #HOSTNAME_COMMAND: "docker info | grep ^Name: | cut -d' ' -f 2"
      KAFKA_ADVERTISED_HOST_NAME: 192.168.1.128
      KAFKA_CREATE_TOPICS: "test:1:1"
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181


    ports:
      - 9092:9092

    volumes:
      # - ./docker/kafka/config:/opt/kafka/config as√≠ no tira, tengo una copia pero el resto de archivos no se crean
      - /var/run/docker.sock:/var/run/docker.sock

    networks:
      - zookeeper-net
      - mariadb-univ_net

networks:
  zookeeper-net:
  mariadb-univ_net:
    external: true
